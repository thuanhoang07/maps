<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google Map Example Using Javascript</title>

    <!-- Load the Google Maps API -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBRr6PMgMCG4GrlhCbO_wp466zIhddRJlg&callback=initMap"
            async defer></script>

    <!-- Link to your JavaScript and CSS -->
    <script src="index.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div id="map"></div> <!-- Map container -->

<p id="directions"></p> <!-- Directions or other information -->

<!-- Input toggle switch -->
<!-- <label class="switch">
    <input type="checkbox" id="name">
    <span class="slider round"></span>
</label> -->

<div id="overlay"></div> <!-- Overlay for displaying information -->

<script src="https://www.unpkg.com/@eohjsc/era-widget@1.0.14/src/index.js"></script>
<script>
    const eraWidget = new EraWidget();
    let configlat = null;
    let configlon = null;
    let latValue = null;
    let lonValue = null;

    eraWidget.onConfiguration((configuration) => {
        configlat = configuration.realtime_configs.find(config => config.name === 'lat');
        configlon = configuration.realtime_configs.find(config => config.name === 'lon');
    });

    eraWidget.onValues((values) => {
        if (configlat && values[configlat.id]) {
            latValue = values[configlat.id].value;
            document.getElementById('lat').checked = latValue > 0;
            document.getElementById('lat').value = latValue;
        }

        if (configlon && values[configlon.id]) {
            lonValue = values[configlon.id].value;
            document.getElementById('lon').checked = lonValue > 0;
            document.getElementById('lon').value = lonValue;
        }

        updateOverlay();
    });

    function updateOverlay() {
        const overlay = document.getElementById('overlay');
        overlay.innerHTML = `
            <p style="color: red;">
                <strong>Config lat:</strong> ${configlat ? JSON.stringify(configlat) : 'N/A'}<br>
                <strong>Config lon:</strong> ${configlon ? JSON.stringify(configlon) : 'N/A'}<br>
                <strong>latValue:</strong> ${latValue !== null ? latValue : 'N/A'}<br>
                <strong>lonValue:</strong> ${lonValue !== null ? lonValue : 'N/A'}<br>
            </p>
        `;
    }

    eraWidget.ready();
</script>


</body>
</html>
