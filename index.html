<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google Map Example Using Javascript</title>

    <!-- Load the Google Maps API -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBRr6PMgMCG4GrlhCbO_wp466zIhddRJlg&callback=initMap"
            async defer></script>

    <!-- Link to your JavaScript and CSS -->
    <script src="index.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- Add this to your HTML to display the values -->
<div id="overlay"></div>

<script src="https://www.unpkg.com/@eohjsc/era-widget@1.0.14/src/index.js"></script>
<script>
    const eraWidget = new EraWidget();
    let configLAT = null;
    let configLON = null;
    let latValue = null;
    let LONValue = null;
    
    eraWidget.onConfiguration((configuration) => {
        configLAT = configuration.realtime_configs[0];
        configLON = configuration.realtime_configs[1];
        console.log("Configuration Loaded:", configuration);
    });

    eraWidget.onValues((values) => {
        if (configLAT && values[configLAT.id]) {
            const input1 = document.getElementById('Lat');
            latValue = values[configLAT.id].value; 
            input1.checked = latValue > 0;
            console.log("Latitude Value:", latValue);
        }
        if (configLON && values[configLON.id]) {
            const input2 = document.getElementById('LON');
            LONValue = values[configLON.id].value; 
            input2.checked = LONValue > 0; 
            console.log("Longitude Value:", LONValue);
        }
        updateOverlay();  // Moved updateOverlay here so it gets called after both values are set
    });

    function updateOverlay() {
        const overlay = document.getElementById('overlay');
        overlay.innerHTML = `
            <p style="color: red;">
                <strong>latValue:</strong> ${latValue !== null ? latValue : 'N/A'}<br>
                <strong>LONValue:</strong> ${LONValue !== null ? LONValue : 'N/A'}
            </p>
        `;
    }

    eraWidget.ready();
</script> 

</body>
</html>
